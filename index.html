<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Daily Snapshot By Nasa - Puvaan Raaj</title>
    <!-- MDB icon -->
    <link rel="icon" href="img/mdb-favicon.ico" type="image/x-icon" />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <!-- Google Fonts Roboto -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap"
    />
    <!-- MDB -->
    <link rel="stylesheet" href="css/mdb.min.css" />
    <!-- Favicon -->
    <link
      href="data:image/x-icon;base64,AAABAAEAEBAAAAAAAABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAFBKtAHc4TgCAPFMAUQ4xAD8KHADcxc8ATEvJAISD3wCHTGAAsJmfAL6nsQCca3wAw52sAD8QZwAUE3EAUQ0kAFYuOwB+en0Ak15wAHMwRQC0iJYApaXrAKZ0hQBwKUEAIhfCAIxTZwAxF7EAhFJiAHQySQCrqKkA9e7yAAsKWwB8foQAbFxgAEoMIQDe3t4AOQkaAKx7iwB4nvIAgkRZAOzd4QB4U2EAbCpAAFMQJwBYPJMAYBEsAGMYMQAXFcoAjVtrADdY2wCsjJYAPhOUAPjz9gBqSVUAlWFzAJxleACPio0AY1RYANbW1gBXULcAYR4yADIIFwAoBxIAWxkwAGohOgCleYsAmmF0AEQLHwBaECkArYWTAK282ADOtr4ATA0iAG87TQBHFIMAej9rAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKgUlJREAAAAAAAAAADweIyMjREQlPzoAAAAAAAAcDhAsLBAQSQU+PwAAAAAKPUJBLS4uLkUxBSIhAAAAHUEuLi4bAC4uNUo2PgAAR0xBLy4uODQuLi5FSQUAAAAJBgAwAAAULjIfNTsFEgAACQAVLkEAMAAXMDU7RDkAAAwJQSkuLi4uJzBLBEQAAAAmNwMvLi4uRi4uGQEPAAAABkYTAkMuQS4uLkUEByAAAABIRhMDQxhBQT1AEAAWIQAAACRGOBooDR0rMwAAAAgAAAAAAAsMEzEMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//AAD4PwAAwA8AAMAHAACAAwAAgQMAAAADAACWAQAAooEAAIADAACAAwAAgAEAAMAEAADgDgAA+D8AAP//AAA="
      rel="icon"
      type="image/x-icon"
    />

    <style>
      /* Additional CSS styling */
      body {
        background-color: #121212;
        color: #ffffff;
        transition: background-color 0.5s ease, color 0.5s ease;
      }

      .dark-mode {
        background-color: #121212;
        color: #ffffff;
      }

      .light-mode {
        background-color: #f8f9fa;
        color: #000000;
      }

      .container {
        background-color: #1e1e1e;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
        transition: background-color 0.5s ease, color 0.5s ease;
      }

      .light-mode .container {
        background-color: white;
      }

      .form-label,
      .form-control {
        color: #ffffff;
      }

      .light-mode .form-label,
      .light-mode .form-control {
        color: #000000;
      }

      /* Flexbox layout for image and details */
      .row {
        display: flex;
        flex-wrap: wrap;
        align-items: flex-start; /* Align items at the top */
      }

      #wrapper-media {
        flex: 1; /* Allow flexibility for equal space distribution */
        margin-right: 20px;
        margin-bottom: 20px;
      }

      #wrapper-image {
        max-width: 100%;
        height: auto;
        display: block; /* Fix for removing extra space below inline-block elements */
      }

      #wrapper-details {
        flex: 1; /* Allow flexibility for equal space distribution */
        max-height: 400px;
        overflow-y: auto; /* Scrollable content */
      }

      #wrapper-title {
        font-size: 32px;
        margin-top: 0;
      }

      #wrapper-explanation {
        margin-top: 10px;
        font-size: 18px;
        text-align: justify;
      }

      #footer {
        text-align: center;
        margin-top: 30px;
      }

      #footer .social-icons {
        font-size: 24px;
        margin-top: 10px;
      }

      .social-icons a {
        margin: 0 10px;
      }

      /* Additional styling for mobile responsiveness */
      @media (max-width: 768px) {
        #wrapper-media {
          margin-right: 0;
        }

        #wrapper-details {
          margin-top: 20px;
        }

        #wrapper-title {
          font-size: 24px;
        }

        #wrapper-explanation {
          font-size: 16px;
        }
      }

      @media (max-width: 576px) {
        .container {
          padding: 20px 10px; /* Adding padding to the left and right */
        }

        #wrapper-title {
          font-size: 20px;
        }

        #wrapper-explanation {
          font-size: 14px;
        }
      }

      @media (max-width: 414px) {
        .container {
          padding: 20px 10px; /* Adding padding to the left and right */
        }

        #wrapper-title {
          font-size: 18px;
        }

        #wrapper-explanation {
          font-size: 12px;
        }
      }
    </style>
  </head>

  <body class="dark-mode">
    <div class="container my-5">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <label for="date-picker" class="form-label">Select your date</label>
        <a id="dark-mode-toggle" href="javascript:void(0);">
          <i class="fas fa-adjust" style="font-size: 24px; color: white;"></i>
        </a>
      </div>
      <div class="form-outline mb-4">
        <input type="date" class="form-control" id="date_picker" />
      </div>

      <div class="row">
        <div id="wrapper-media">
          <div
            class="bg-image hover-overlay ripple shadow-1-strong rounded"
            data-mdb-ripple-color="light"
          >
            <img
              src=""
              id="wrapper-image"
              class="w-100"
              alt="Image from NASA"
            />
            <a id="wrapper-hdurl" href="#!" target="_blank">
              <div
                class="mask"
                style="background-color: hsla(0, 0%, 98%, 0.2)"
              ></div>
            </a>
          </div>
        </div>

        <div id="wrapper-details">
          <h5 id="wrapper-title"></h5>
          <p class="mb-2 text-muted">
            Copyright: <span id="wrapper-copyright"></span>
          </p>
          <p id="wrapper-explanation"></p>
        </div>
      </div>

      <div id="footer">
        <p>&copy; <span id="current-year"></span> Puvaan Raaj. All rights reserved.</p>
        <div class="social-icons">
          <a href="https://github.com/PuvaanRaaj" target="_blank"
            ><i class="fab fa-github" style="color: white"></i
          ></a>
          <a href="https://www.linkedin.com/in/puvaan-raaj/" target="_blank"
            ><i class="fab fa-linkedin" style="color: white"></i
          ></a>
        </div>
      </div>

      <h6 style="font-size: 12px; text-align: center">
        For Better View Pls Use Laptop/Desktop
      </h6>
    </div>
    <!-- End your project here-->

    <!-- MDB -->
    <script type="text/javascript" src="js/mdb.min.js"></script>
    <!-- Custom scripts -->
    <script type="text/javascript">
      document
        .getElementById("date_picker")
        .addEventListener("change", function () {
          const selectedDate = formatDate(this.value); // Format the selected date
          fetchNASAData(selectedDate);
        });

      // Set today's date as the default value for the date picker
      const today = new Date();
      const year = today.getFullYear();
      const month = String(today.getMonth() + 1).padStart(2, "0");
      const day = String(today.getDate()).padStart(2, "0");
      const formattedToday = `${year}-${month}-${day}`;

      document.getElementById("date_picker").value = formattedToday;

      // Fetch NASA data with default date
      fetchNASAData(formattedToday);

      function formatDate(inputDate) {
        const date = new Date(inputDate);
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, "0");
        const day = String(date.getDate()).padStart(2, "0");
        return `${year}-${month}-${day}`;
      }

      function fetchNASAData(date) {
        let xmlHttp = new XMLHttpRequest();

        xmlHttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            let data = JSON.parse(this.responseText);

            let copyright = data["copyright"];
            let date = data["date"];
            let explanation = data["explanation"];
            let hdurl = data["hdurl"];
            let media_type = data["media_type"];
            let service_version = data["service_version"];
            let title = data["title"];
            let url = data["url"];

            let imageType = `<div class="bg-image hover-overlay ripple shadow-1-strong rounded" data-mdb-ripple-color="light">
                <img src="" id="wrapper-image" class="w-100" alt="Louvre" />
                <a id="wrapper-hdurl" href="#!" target="_blank">
                  <div class="mask" style="background-color: hsla(0, 0%, 98%, 0.2)"></div>
                </a>
              </div>`;

            let videoType = `<div class="ratio ratio-16x9">
                              <iframe
                                id="wrapper-video"
                                src=""
                                title="YouTube video"
                                allowfullscreen
                              ></iframe>
                            </div>`;

            document.getElementById("wrapper-title").innerHTML = title;
            document.getElementById("wrapper-explanation").innerHTML =
              explanation;
            document.getElementById("wrapper-copyright").innerHTML =
              "NASA" + " | " + date + " | " + service_version;

            if (media_type == "video") {
              document.getElementById("wrapper-media").innerHTML = videoType;
              document.getElementById("wrapper-video").src = url;
            } else {
              document.getElementById("wrapper-media").innerHTML = imageType;
              document.getElementById("wrapper-image").src = url;
              document.getElementById("wrapper-hdurl").href = hdurl;
            }
          }
        };

        let date_picker_date = document.getElementById("date_picker").value;
        let url = "https://api.nasa.gov/planetary/apod?";
        let apiKey = "api_key=7UVoquuyiS29z3bMTIAHVpDWoAGsLPO9LPbg3i6F"; //saved in netlify Enviroment for security
        let queryDate = "date" + "=" + date_picker_date + "&";

        let fullUrl = url + apiKey + "&" + queryDate;

        xmlHttp.open("GET", fullUrl, true);
        xmlHttp.send();
      }

      // Dark mode toggle
      const darkModeToggle = document.getElementById("dark-mode-toggle");
      const body = document.body;

      darkModeToggle.addEventListener("click", () => {
        body.classList.toggle("dark-mode");
        body.classList.toggle("light-mode");
        localStorage.setItem(
          "dark-mode",
          body.classList.contains("dark-mode")
        );
      });

      // Load dark mode preference
      if (localStorage.getItem("dark-mode") === "false") {
        body.classList.remove("dark-mode");
        body.classList.add("light-mode");
      }

      // Set current year
      document.getElementById("current-year").textContent = new Date().getFullYear();
    </script>
  </body>
</html>
